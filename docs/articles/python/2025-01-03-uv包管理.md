# ç›®å½•

[[toc]]

## ä»‹ç»

uv æ˜¯ä¸€ä¸ª **æå¿«çš„ Python åŒ…ç®¡ç†å™¨**ï¼Œå…¼å®¹ pip / virtualenv / pyproject.tomlï¼Œä¸“æ³¨äºï¼š

â€¢	ğŸš€ **æé€Ÿå®‰è£…ä¾èµ–ï¼ˆæ¯” pip å¿«å‡ åå€ï¼‰**

â€¢	ğŸ“¦ æ”¯æŒ requirements.txt å’Œ pyproject.toml

â€¢	ğŸ§± å†…ç½®è™šæ‹Ÿç¯å¢ƒï¼ˆä¸ä¾èµ– venvï¼‰

â€¢	ğŸ”’ å®Œæ•´çš„ä¾èµ–é”å®šæœºåˆ¶ï¼ˆæ”¯æŒ uv pip compileï¼‰

â€¢	ğŸ’¡ ä½¿ç”¨ Rust ç¼–å†™ï¼Œæ€§èƒ½å¼ºæ‚

| **åŠŸèƒ½** | pip | uv |
| --- | --- | --- |
| å®‰è£…é€Ÿåº¦ | æ…¢ | **è¶…å¿«ï¼ˆåŸºäº Rustï¼‰** |
| æ”¯æŒé”æ–‡ä»¶ | âŒ | âœ… uv pip compile |
| åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ | éœ€æ‰‹åŠ¨ | âœ… è‡ªåŠ¨å†…ç½® |
| å¤šå¹³å°ä¸€è‡´æ€§ | ä¸€èˆ¬ | âœ… é€šè¿‡ .lock ä¿è¯ |
| å®‰è£…ç¼“å­˜ä¼˜åŒ– | ä¸€èˆ¬ | âœ… å¼ºç¼“å­˜ç³»ç»Ÿ |

## ä½¿ç”¨æ–¹æ³•

å®‰è£…è¯´æ˜

```python
# å®‰è£… uv
curl -Ls https://astral.sh/uv/install.sh | bash
æŒ‰ç…§ç¯å¢ƒä½ç½®
vim ~/.zshrc
export PATH="$HOME/.local/bin:$PATH"
source ~/.zshrc
which uv     # åº”è¯¥è¿”å› /opt/homebrew/bin/uv æˆ– ~/.local/bin/uv
uv --version
# å®‰è£…ä¾èµ–ï¼ˆè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼‰
uv pip install -r requirements.txt

# æ·»åŠ ä¾èµ–
uv pip install requests

# å‡çº§ä¾èµ–
uv pip install --upgrade requests

# å¸è½½ä¾èµ–
uv pip uninstall requests

# ç”Ÿæˆé”æ–‡ä»¶
uv pip compile requirements.in > requirements.lock.txt
```

å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
(.venv) âœ  ai_tools_show git:(main) uv --version
uv 0.6.9 (3d9460278 2025-03-20)
(.venv) âœ  ai_tools_show git:(main) uv venv
Using CPython 3.12.4 interpreter at: /Users/jacinlee/miniconda3/bin/python
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
(.venv) âœ  ai_tools_show git:(main) 
```

uv æ˜¯é€šè¿‡ **å½“å‰ç»ˆç«¯çš„ python æˆ– python3 è·¯å¾„** æ¥å†³å®šä½¿ç”¨å“ªä¸ªè§£é‡Šå™¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä¼šæ‰§è¡Œï¼š

which python

åœ¨ä½ çš„ç»ˆç«¯å½“å‰ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªæŒ‡å‘çš„æ˜¯ Anaconda çš„ Pythonã€‚

**ç”¨ uv åˆ›å»ºæˆ–æ¿€æ´»ä¸€ä¸ª Python 3.12 çš„è™šæ‹Ÿç¯å¢ƒ**ï¼Œå¹¶è®©å®ƒæˆä¸ºè¿™ä¸ªé¡¹ç›®çš„é»˜è®¤ç¯å¢ƒã€‚ä¸‹é¢æ˜¯ä½ çš„å®Œæ•´æ“ä½œæµç¨‹ï¼š

```python
which -a python3.12
```

uv ä¼šä½¿ç”¨ä½ æŒ‡å®šçš„ Python ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚å‘½ä»¤å¦‚ä¸‹ï¼š

```python
uv venv --python=python3.12
```

æˆ–è€…æ˜¾å¼ï¼š

```python
uv venv --python=/usr/local/bin/python3.12
```

æ¿€æ´»ï¼š

```python
source .venv/bin/activate
```

å¦‚æœä¸€ä¸ªé¡¹ç›®å·²ç»æœ‰äº†requirements.txtäº†ï¼Œé‚£ä¹ˆåœ¨ä¸ç ´åå·²æœ‰é¡¹ç›®çš„æƒ…å†µä¸‹è¿ç§»åˆ° uv + pyproject.tomlï¼Œå¯ä»¥æŒ‰ä¸‹é¢æ­¥éª¤å¹³æ»‘è¿‡æ¸¡

```python
uv init --python=3.12

>>>>>è¾“å‡º
Initialized project `ai-tools-show`

```

ç„¶åç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼šåˆ†åˆ«æ˜¯.python-version  pyproject.tomlæ–‡ä»¶äº†

```python
uv pip install -r pyproject.toml

uv pip install fastapi --add 
è‡ªåŠ¨å†™å…¥ pyproject.toml çš„ [project.dependencies] åŒºå—

æˆ–è€…ï¼š
# ç¬¬ä¸€æ­¥ï¼šå®‰è£…
uv add -r requirements.txt

uv add fastapi

# ç¬¬äºŒæ­¥ï¼šåŒæ­¥å†™å…¥ pyproject.toml
uv pip freeze --add
```

| **å‘½ä»¤** | **ä½œç”¨** |
| --- | --- |
| uv pip install -r requirements.txt | åªå®‰è£…ä¾èµ–ï¼Œä¸å†™å…¥ pyproject.toml |
| uv add fastapi | å®‰è£…å¹¶å†™å…¥ pyproject.toml |
| uv add -r requirements.txt | ä» requirements.txt æ·»åŠ æ‰€æœ‰ä¾èµ–åˆ° pyproject.toml |
| uv pip freeze | æŸ¥çœ‹å½“å‰ç¯å¢ƒä¾èµ–ï¼ˆä¸å†™å…¥æ–‡ä»¶ï¼‰ |

## **è§£é‡Šå™¨å…±äº«**ï¼Œä½† **ä¾èµ–éš”ç¦»**

è¿™å’Œ Java çš„ Mavenã€Node.js çš„ npm/yarn æ˜¯ä¸€æ ·çš„é€»è¾‘ï¼š
â€¢	å…¨å±€åªå®‰è£…ä¸€æ¬¡ Java / Node è§£é‡Šå™¨
â€¢	æ¯ä¸ªé¡¹ç›®å•ç‹¬ç»´æŠ¤è‡ªå·±çš„ pom.xml æˆ– package.jsonï¼Œä»è€Œä¸‹è½½ç‹¬ç«‹ä¾èµ–

Python ç”Ÿæ€ **é»˜è®¤æ¨èçš„æ˜¯ venv/virtualenv**ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªé¡¹ç›®ä¸€ä¸ª Python + ä¾èµ–ã€‚

ä¸è¿‡ä½ å¯ä»¥é€‰æ‹© **åªå…±äº« Python è§£é‡Šå™¨**ï¼Œä¾èµ–ç”¨ .venv éš”ç¦»ï¼š

```python
# ä½¿ç”¨ç³»ç»Ÿå®‰è£…çš„ Python3.12ï¼Œä½†ä¸å¤åˆ¶å®ƒï¼Œä»…é“¾æ¥ç”¨
uv venv --python=python3.12
```

**å¼•ç”¨ç³»ç»Ÿå®‰è£…çš„ Python**ï¼Œè€Œä¸æ˜¯å¤åˆ¶å®ƒã€‚è¿™æ ·å¤šä¸ªé¡¹ç›®å¯ä»¥å…±ç”¨ interpreterï¼Œåªéš”ç¦»ä¾èµ–ï¼ˆsite-packagesï¼‰ã€‚

ä½ å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤éªŒè¯è§£é‡Šå™¨è·¯å¾„ï¼š

```python
which python
# æˆ–è€…
python -c "import sys; print(sys.executable)"
```

| **æ–¹æ¡ˆ** | **æ˜¯å¦å…±äº«è§£é‡Šå™¨** | **æ˜¯å¦éš”ç¦»ä¾èµ–** | **è¯´æ˜** |
| --- | --- | --- | --- |
| uv venv --python=python3.12 | âœ… æ˜¯ï¼ˆå¯æŒ‡å®šï¼‰ | âœ… æ˜¯ | æ¨è âœ… |
| python3.12 -m venv .venv | âœ… æ˜¯ | âœ… æ˜¯ | æ ‡å‡† Python å·¥å…· |
| ä¸ç”¨ venvï¼Œç›´æ¥ pip install | âœ… æ˜¯ | âŒ å¦ | ä¸æ¨è âŒ |
| Java/Maven | âœ… æ˜¯ | âœ… æ˜¯ï¼ˆæŒ‰ .m2/repoï¼‰ | ç±»ä¼¼ |
| Node/npm | âœ… æ˜¯ | âœ… æ˜¯ï¼ˆæŒ‰ node_modulesï¼‰ | ç±»ä¼¼ |

| **å·¥å…·** | **æœ¬è´¨ä½œç”¨** | **è°å¼€å‘çš„** | **ç®¡ç†çš„å†…å®¹** |
| --- | --- | --- | --- |
| pip | Python å®˜æ–¹åŒ…ç®¡ç†å·¥å…· | Python å®˜æ–¹ | PyPI ä¸Šçš„çº¯ Python åŒ… |
| conda | ç§‘å­¦è®¡ç®—ç”Ÿæ€çš„åŒ…ç®¡ç†å·¥å…· | Anaconda Inc. | Python + Cä¾èµ–ç­‰æ··åˆåŒ… |
| uv | æ–°ä¸€ä»£è¶…å¿«åŒ…ç®¡ç†å·¥å…· | Astral.sh | PyPI åŒ…ï¼ˆå…¼å®¹ pipï¼‰ |

| **å¯¹æ¯”é¡¹** | uv | pip | conda |
| --- | --- | --- | --- |
| ğŸ“¦ åŒ…æº | PyPI | PyPI | Conda Forge / é»˜è®¤ channel |
| ğŸƒâ€â™‚ï¸ å®‰è£…é€Ÿåº¦ | ğŸš€ æå¿«ï¼ˆRust å®ç°ï¼‰ | ä¸­ç­‰ | è¾ƒæ…¢ï¼ˆä¾èµ–è§£ç®—å¼€é”€å¤§ï¼‰ |
| ğŸ§  ä¾èµ–è§£å†³èƒ½åŠ› | âœ… å¼ºï¼ˆæ”¯æŒé”å®šï¼‰ | âŒ å·®ï¼ˆä¾èµ–å†²çªå¸¸è§ï¼‰ | âœ… å¼ºï¼ˆå¯ä»¥æ··åˆ C ä¾èµ–ï¼‰ |
| ğŸ è™šæ‹Ÿç¯å¢ƒç®¡ç† | âœ… å†…ç½® uv venv | âŒ æ— ï¼ˆéœ€é…åˆ venv ä½¿ç”¨ï¼‰ | âœ… å†…ç½® conda env |
| ğŸ” é”æ–‡ä»¶æ”¯æŒ | âœ… uv.lock | âŒ æ— åŸç”Ÿé”ï¼ˆéœ€ç”¨ pip-toolsï¼‰ | âœ… environment.yml + reproducible |
| ğŸ“ ä¾èµ–éš”ç¦» | âœ… æ¯é¡¹ç›® .venv | âŒ æ‰‹åŠ¨åšï¼ˆæ— è‡ªåŠ¨éš”ç¦»ï¼‰ | âœ… è‡ªåŠ¨ï¼ˆä½†ä½“ç§¯å¤§ï¼‰ |
| ğŸ§© åŸç”Ÿæ”¯æŒ C åº“ | âŒ ä»…çº¯ Python | âŒ éœ€ç¼–è¯‘å™¨ / wheels | âœ… éå¸¸æ“…é•¿ï¼ˆå¦‚ NumPy, pandasï¼‰ |
| ğŸ’¡ åˆå­¦å‹å¥½ | âœ… ç®€æ´ | âœ… ç®€æ´ | âŒ å­¦ä¹ æ›²çº¿é™¡ï¼ˆè·¯å¾„ç®¡ç†å¤æ‚ï¼‰ |
| ğŸ”¥ æ¨èåœºæ™¯ | ğŸš€ Web/AI é¡¹ç›®ï¼Œç°ä»£å·¥ç¨‹æµ | ğŸ“¦ é€šç”¨ Python åŒ…ç®¡ç† | ğŸ”¬ ç§‘ç ”ç¯å¢ƒï¼ˆéœ€ C/Fortran åº“ï¼‰ |

| FastAPIã€Web å¼€å‘ | uv | å¿«é€Ÿã€å¹²å‡€ã€ç°ä»£ä¾èµ–é”å®šï¼Œé€‚é… venvï¼Œæ„å»ºé€Ÿåº¦è¿œè¶… pip |
| --- | --- | --- |
| é€šç”¨ Python åŒ…ç®¡ç† | pip | å¤Ÿç”¨ï¼Œå…¼å®¹æ€§å¼ºï¼Œä½†éœ€æ‰‹åŠ¨è§£å†³ä¾èµ–å†²çª |
| ç§‘ç ”ã€æ•°å€¼è®¡ç®—ï¼ˆå¦‚pandasï¼‰ | conda | å†…ç½® C/FORTRAN åŒ…ï¼Œå®‰è£… NumPyã€SciPy æ›´ç¨³å®š |
| å¤šé¡¹ç›®/CI/CD æ„å»º | uv + rye | æ”¯æŒé”æ–‡ä»¶ã€é¡¹ç›®éš”ç¦»ã€è§£é‡Šå™¨ç®¡ç†ï¼Œéƒ¨ç½²æ–¹ä¾¿ |

## ä¾èµ–å†²çª

**ä»€ä¹ˆæ˜¯â€œä¾èµ–å†²çªâ€ï¼Ÿæ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ**

```python
pip install A B
```

```
â€¢	A ä¾èµ– requests==2.26
â€¢	B ä¾èµ– requests>=2.28

```

è¿™å°±å†²çªäº† â€”â€” ä½ è£…ä¸äº†ä¸¤ä¸ªç‰ˆæœ¬çš„ requestsï¼Œç³»ç»Ÿæ— æ³•å†³å®šåˆ°åº•è¯¥è£…å“ªä¸€ä¸ªã€‚

ä¼ ç»Ÿ pip åœ¨è¿™æ—¶ä¼šç›´æ¥æŠ¥é”™æˆ–è£…é”™ç‰ˆæœ¬ï¼Œè€Œ uv / poetry ç­‰ç°ä»£å·¥å…·å°±èƒ½æ›´æ™ºèƒ½åœ°è§£å†³ã€‚

| â›“ï¸ æ±‚è§£å›¾ç®—æ³•ä¼˜åŒ– | æ›´å¿«æ‰¾åˆ°ç¬¦åˆæ‰€æœ‰ constraints çš„ç‰ˆæœ¬ç»„åˆ |  |
| --- | --- | --- |
| ğŸ“¦ å…¨å›¾è§£æ | ä¸æ­¢è§£æä½ æ˜¾å¼å®‰è£…çš„åº“ï¼Œè¿˜ä¼šåˆ†æå®ƒä»¬çš„å­ä¾èµ– |  |
| âœ… ä¸¥æ ¼é”å®š | é¿å…æ¯æ¬¡å®‰è£…ç‰ˆæœ¬æ¼‚ç§»ï¼ˆç‰ˆæœ¬æµ®åŠ¨ï¼‰çš„ |  |
|  |  |  |
|  |  |  |

| **pip** | **uvï¼ˆæˆ– poetry ç­‰ï¼‰** |
| --- | --- |
| é€æ­¥è§£æå®‰è£… | å…¨éƒ¨æ„å»ºä¾èµ–æ ‘åä¸€èµ·è§£æ |
| å®‰è£…ä¸­æ‰å‘ç°å†²çª | å®‰è£…å‰å°±å…ˆè§£ä¾èµ–ï¼Œç¡®è®¤æ— è¯¯ |
| æ— æ³•é”å®šç‰ˆæœ¬ | ä¼šç”Ÿæˆç²¾ç¡®ç‰ˆæœ¬é”æ–‡ä»¶ uv.lock |

â€¢	âŒ pip ä¼šå†²çªå¤±è´¥ï¼ˆæˆ–å®‰è£…é”™ç‰ˆæœ¬ï¼‰

â€¢	âœ… uv ä¼šå‘Šè¯‰ä½ ç‰ˆæœ¬å†²çªï¼Œå¹¶ç»™å‡ºå†²çªè·¯å¾„ï¼š

> â— Conflict: some-lib requires requests>=2.28, but you have requests==2.26.
